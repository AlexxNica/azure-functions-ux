<div class="settings-group-wrapper">
    
      <h3>{{ 'feature_virtualDirectoriesName' | translate }}</h3>
    
      <div class="settings-wrapper">
    
        <!-- ---------------------------------------------------------- TABLE ----------------------------------------------------------- -->
        <tbl tblClass="tbl fixed stretch" [items]="groupArray?.controls" #virtualDirectoriesTable>

          <!-- Data/Content Rows -->
          <!-- If ARM call returned successfully, 'items' will not be null, so this will loop through and create a row for each virtual application or directory returned (if any) -->
          <tr *ngFor="let group of virtualDirectoriesTable.items">
            <td class="one-half-col padded-col" [class.pristine]="group.pristine" [class.dirty]="group.dirty">
              <click-to-edit [group]="group" name="virtualPath">
    
                <textbox [control]="group.controls['virtualPath']" [placeholder]="Resources.enterVirtualPath | translate"></textbox>
    
              </click-to-edit>
            </td>

            <td class="one-half-col padded-col">
              <click-to-edit [group]="group" name="physicalPath">
    
                <textbox [control]="group.controls['physicalPath']" [placeholder]="Resources.enterPhysicalPath | translate"></textbox>
    
              </click-to-edit>
            </td>

            <td class="is-app-col padded-col">
              <label>
                <input [formControl]="group.controls['isApplication']" type="checkbox">
                {{ 'isApplication' | translate }}
              </label>
            </td>
    
            <td class="action-col">
              <span class="fa fa-times delete" (click)="deleteVirtualDirectory(group)"></span>
            </td>
          </tr>
    
          <!-- Placeholder/Message Row -->
          <!-- If ARM call did not return successfully or no virtual applications/directories were returned, display a placeholder row -->
          <tr *ngIf="(!!groupArray && virtualDirectoriesTable.items.length === 0) || !groupArray">
            <td class="message-row" colspan="4">
              <!-- If ARM call returned successfully but no virtual applications/directories were returned, display a row with message 'No records' -->
              <!-- If ARM call did not return successfully, display a row with the appropriate message based on permissions -->
              {{
                (!!groupArray && virtualDirectoriesTable.items.length === 0) ? ('emptyVirtualDirectories' | translate) :
                (!groupArray && hasWritePermissions) ? (loadingFailureMessage || loadingMessage) :
                (!groupArray && !hasWritePermissions && showPermissionsMessage) ? permissionsMessage : ''
              }}
            </td>
          </tr>
    
        </tbl>
        <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
    
    
        <!-- --------------------------------------------------------  ADD LINK --------------------------------------------------------- -->
        <!-- If ARM call returned successfully user has write permissions, display 'add' link -->
        <div *ngIf="!!groupArray && hasWritePermissions" class="link add-setting" (click)="addVirtualDirectory()">
          {{ 'addNewVirtualDirectory' | translate }}
        </div>
    
        <!-- If ARM call did not return successfully or user does not have write permissions, display 'add' link disabled -->
        <div *ngIf="!groupArray || !hasWritePermissions" class="disabled-link add-setting">
          {{ 'addNewVirtualDirectory' | translate }}
        </div>
        <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
    
    
        <!-- ---------------------------------------------------------- SHIELD ---------------------------------------------------------- -->
        <div *ngIf="!groupArray || !hasWritePermissions" class="shield">
          <div *ngIf="!groupArray && !!loadingFailureMessage && (hasWritePermissions || !showPermissionsMessage)" class="shield-message">
            {{ loadingFailureMessage }}
          </div>
        </div>
    
        <div *ngIf="!hasWritePermissions" class="shield transparent">
          <div *ngIf="showPermissionsMessage" class="shield-message">
            <p>{{ permissionsMessage }}</p>
            <button class="transparent" (click)="showPermissionsMessage=false">{{ showReadOnlySettingsMessage }}</button>
          </div>
        </div>
        <!-- ---------------------------------------------------------------------------------------------------------------------------- -->
    
      </div>
    
    </div>