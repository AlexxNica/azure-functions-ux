<h3 class="text-level2-heading connection-strings">{{ 'feature_applicationSettingsName' | translate }}</h3>

<div *ngIf="!hasWritePermissions" class="settings-group-wrapper">

  <div class="settings-load-message">
    {{permissionsMessage}}
  </div>

</div>

<div *ngIf="hasWritePermissions && !!groupArray" class="settings-group-wrapper">

  <div *ngIf="!groupArray" class="settings-load-message">
    {{loadingStateMessage}}
  </div>

  <ng-container *ngIf="!!groupArray">

    <tbl tblClass="tbl fixed stretch" [items]="groupArray.controls" #appSettingsTable>
      <tr class="header-row">
        <th class="nameCol"></th>
        <th class="valueCol"></th>
        <th class="actionCol"></th>
      </tr>

      <tr *ngFor="let group of appSettingsTable.items">
        <td [class.pristine]="group.pristine" [class.dirty]="group.dirty">
          <click-to-edit [group]="group" name="name">

            <textbox [control]="group.controls['name']" [placeholder]="Resources.enterName | translate"></textbox>

          </click-to-edit>
        </td>

        <td>
          <click-to-edit [group]="group" name="value">

            <textbox [control]="group.controls['value']" [placeholder]="Resources.enterValue | translate"></textbox>

          </click-to-edit>
        </td>

        <td>
          <span class="fa fa-times delete" (click)="deleteAppSetting(group)"></span>
        </td>
      </tr>
    </tbl>

    <div class="link add-setting" (click)="addAppSetting()">
      {{ 'addNewSetting' | translate }}
    </div>

    <div *ngIf="debug === true">
      <p>{{mainForm.timeStamp}}</p>
      <p>{{this.groupArray.parent.timeStamp}}</p>
      <p>busyStateKeys: {{_busyState.name}}</p>
      <p>busyStateKeys: {{_busyState.busyStateKeys}}</p>
    </div>

  </ng-container>

</div>
